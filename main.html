<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sprechstundenbuchung</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="JQuery/jquery-3.2.1.js"></script>
    <script src="bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="zeiten.js"></script>
    <script src="funktionen.js"></script>
</head>
<body>
<div id="container" class="container">
    <div id="header" class="row">
        <!--<div id="dropButton" class="form-group">-->
        <!--<select class="form-control dropButtonAuswahl" id="sel1">-->
        <!--<option>Prof. Dr. Westbomke</option>-->
        <!--<option>Prof. Dr. Eckert</option>-->
        <!--<option>Prof. Dr. Thies</option>-->
        <!--<option>Prof. Dr. Erich</option>-->
        <!--</select>-->
        <!--</div>-->
        <div id="dropButton" class="dropdown">
            <button id="dropdownButton" class="btn dropdown-toggle" type="button" data-toggle="dropdown">Professoren
                <span class="caret"></span></button>
            <ul class="dropdown-menu">
                <li><a href="#">Prof. Dr. Eckert</a></li>
                <li><a href="#">Prof. Dr. Westbomke</a></li>
                <li><a href="#">Prof. Dr. Thies</a></li>
                <li><a href="#">Prof. Dr. Eckert</a></li>
                <li><a href="#">Prof. Dr. Westbomke</a></li>
                <li><a href="#">Prof. Dr. Thies</a></li>
                <li><a href="#">Prof. Dr. Eckert</a></li>
                <li><a href="#">Prof. Dr. Westbomke</a></li>
                <li><a href="#">Prof. Dr. Thies</a></li>
                <li><a href="#">Prof. Dr. Eckert</a></li>
                <li><a href="#">Prof. Dr. Westbomke</a></li>
                <li><a href="#">Prof. Dr. Thies</a></li>
            </ul>
        </div>
        <div id="logoContainer">
            <img src="pics/logo.jpg">
        </div>
    </div>
    <div id="weekdays" class="row">
        <div id="links" class="weekdayBtn">
            <span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>
        </div>
        <div id="weekdayContainer" class="">
            <div id="montag" class=" weekday">
                <h1>MO</h1>
            </div>
            <div id="dienstag" class=" weekday">
                <h1>DI</h1>
            </div>
            <div id="mittwoch" class=" weekday">
                <h1>MI</h1>
            </div>
            <div id="donnerstag" class=" weekday">
                <h1>DO</h1>
            </div>
            <div id="freitag" class=" weekday">
                <h1>FR</h1>
            </div>
        </div>
        <div id="rechts" class="weekdayBtn">
            <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
        </div>
    </div>


    <div id="allHourContainer" class="row">
        <div id="overflowHelpContainer">
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="eight" class=" hour">
                        <h2>8</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="eightFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="eightThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="eightFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="nine" class="hour">
                        <h2>9</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="nineFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="nineThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="nineFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="ten" class="hour">
                        <h2>10</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="tenFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="tenThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="tenFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="eleven" class="hour">
                        <h2>11</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="elevenFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="elevenThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="elevenFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="twelve" class="hour">
                        <h2>12</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="twelveFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="twelveThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="twelveFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="thirteen" class="hour">
                        <h2>13</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="thirteenFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="thirteenThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="thirteenFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="fourteen" class="hour">
                        <h2>14</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="fourteenFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="fourteenThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="fourteenFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="fifteen" class="hour">
                        <h2>15</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="fifteenFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="fifteenThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="fifteenFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="sixteen" class="hour">
                        <h2>16</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="sixteenFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="sixteenThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="sixteenFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
            <div class="row hourRow">
                <div class="col-sm-3 hourContainer">
                    <div id="seventeen" class="hour">
                        <h2>17</h2>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="seventeenFifteen" class="hour">
                        <h4>15</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="seventeenThirty" class="hour">
                        <h4>30</h4>
                    </div>
                </div>
                <div class="col-sm-3 hourContainer">
                    <div id="seventeenFortyfive" class="hour">
                        <h4>45</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="bottomContainer" class="row">
        <div id="back">
            <span class="glyphicon glyphicon-triangle-left align-center" aria-hidden="true"></span>
        </div>
        <div id="acceptBtn">
            <span class="glyphicon glyphicon-plus align-center" aria-hidden="true"></span>
        </div>
        <div id="cancelBtn" class="">
            <span class="glyphicon glyphicon-minus align-center" aria-hidden="true"></span>

        </div>
    </div>
</div>
</div>

<script>
    fillHours(montag);
    clickDay();
    clickHour2();
    checkDevice();
    //addHours("dienstagContainer");
    //addHours("mittwochContainer");
    //addHours("donnerstagContainer");
    //addHours("freitagContainer");


    function clickHour2() {
        var clickedHours = 0;
        var clickedHour1;
        var clickedHour2;
        var hour = document.getElementsByClassName("hour");


        for (var i = 0; i < hour.length; i++) {

            hour[i].addEventListener("click", function () {
                //Falls weiß dann ändere in grün
                if (getComputedStyle(this).backgroundColor === "rgb(255, 255, 255)" && clickedHours < 2) {
//                    if(clickedHours == 0) {
//                        clickedHour1 = this;
//                    }
//                    if (clickedHours == 1) {
//                        clickedHour2 = this;
//                        //console.log(clickedHour2);
//                    }
                    console.log(checkIfGrey(this));
                    if (clickedHours == 0) {
                        this.style.backgroundColor = "rgb(151, 192, 134)";
                        clickedHours++;
                    } else if (clickedHours == 1 && checkIfGrey(this) == false) {

                        this.style.backgroundColor = "rgb(151, 192, 134)";
                        clickedHours++;
                    }

                    checkClickedHours();
                    //console.log(clickedHours);

                    //Falls grün dann ändere in weiß
                } else if (getComputedStyle(this).backgroundColor === "rgb(151, 192, 134)") {
                    this.style.backgroundColor = "rgb(255, 255, 255)";
                    clickedHours--;
                    //console.log(clickedHours);
                }


            });
        }

        function checkClickedHours() {
            if (clickedHours == 2) {
                for (var i = 0; i < hour.length; i++) {
                    if (getComputedStyle(hour[i]).backgroundColor == "rgb(151, 192, 134)") {
                        if (getComputedStyle(hour[i + 1]).backgroundColor == "rgb(255, 255, 255)") {
                            hour[i + 1].style.backgroundColor = "rgb(151, 192, 134)";
                        } else if (getComputedStyle(hour[i + 1]).backgroundColor == "rgb(151, 192, 134)") {
                            break;
                        }
                    }
                }
            }
        }

        //Prüfen ob ein graues Element dazwischen liegt
        function checkIfGrey(item) {
            var hourIndex1;
            var hourIndex2;
            var isGrey = false;
            //Erstes Element suchen
            for (var i = 0; i < hour.length; i++) {
                if (getComputedStyle(hour[i]).backgroundColor == "rgb(151, 192, 134)") {
                    hourIndex1 = i;
                }
            }

            //Zweites Element suchen
            for (var i = 0; i < hour.length; i++) {
                if (hour[i] === item) {
                    hourIndex2 = i;
                }
            }
            //console.log(hourIndex1);
            //console.log(hourIndex2);

            //Prüfen welcher Index höher ist
            if (hourIndex1 < hourIndex2) {
                checkGrey(hourIndex1, hourIndex2);
                //console.log(isGrey);
                return isGrey;

            } else if (hourIndex1 > hourIndex2) {
                checkGrey(hourIndex2, hourIndex1);
                //console.log(isGrey);
                return isGrey;

            }

            function checkGrey(start, ende) {
                for (var i = start + 1; i <= ende - 1; i++) {
                    //console.log(i);
                    //console.log(ende-1);
                    if (getComputedStyle(hour[i]).backgroundColor == "rgb(232, 236, 239)") {
                        isGrey = true;
                        break;
                    }
                }
            }
        }


    }

</script>

</body>
</html>